sub_54600
sub_5BDC0
sub_6EDE0
sub_6EF10

sub_75044 -x

sub_75AE0 -x

sub_8C140 -x

ebx 355264
esi 3532c1
edi 2B9EE0
ebp 355280

ebp 355264
esi 00000021
ebp 355264
ebp 355244
edx 355244
call 0028C566

call 0028C59E

Bit8u num=Fetchb(); -21
flags unknown -0

CPU_SW_Interrupt(num,GETIP);GETIP=oldeip
CPU_Interrupt(num,CPU_INT_SOFTWARE,oldeip);

sub_56210
	sub_89B60(7u);//26AB60
	sub_86A00();
		sub_85E40
 			int386 - inicializace pro 256
		sub_85FD0
			sub_85EB0
				int386 31,100 - inicializace pro 2
			sub_85EB0
				int386 31,100 - inicializace pro 256
		sub_86010()
			int386 31,300 pro BX=2F,CX=1D8 - simulate real mode interupt//CD-ROM - INSTALLATION CHECK
		sub_86BD0//267BD0


0160:235200   push ebx 53 //00  -var4
0160:235201   push esi 56 //3532C1 -var3
0160:235202   push ebp 55 //355250 -var2
0160:235203   mov  ebp,esp 89E5
0160:235205   sub  esp,00000084 81EC84000000
0160:23520B   sub  ebp,00000082 81ED82000000
0160:235211   xor  edx,edx 31D2
0160:235213   push 002A1614 6814162A00 //2A1614 -var1
0160:235218   mov  [ebp+007E],edx 89557E
0160:23521B   call 0029EBED ($+699cd) E8CD990600

outtext

0160:235220   add  esp,0004 83C404
0160:235223   push 002A1630 6830162A00
0160:235228   mov  bl,01 B301
0160:23522A   mov  eax,[002A51A4] A1A4512A00
0160:23522F   push 002A163C 683C162A00
0160:235234   xor  bh,bh 30FF
0160:235236   mov  al,[eax+000000B6] 8A80B6000000
0160:23523C   push 002A14E0 68E0142A00
0160:235241   and  eax,000000FF 25FF000000
0160:235246   push eax 50
0160:235247   push 002A1644 6844162A00
0160:23524C   lea  eax,[ebp-0002] 8D45FE
0160:23524F   push eax 50
0160:235250   call 0026F3D5 ($+3a180) E880A10300

printf

0160:235255   add  esp,0018 83C418
0160:235258   lea  eax,[ebp+007E] 8D457E
0160:23525B   push eax 50 // 35523C(ebp+7e) - var2
0160:23525C   lea  eax,[ebp-0002] 8D45FE
0160:23525F   push eax 50// buffer - 3551BC(ebp+2) - var1
0160:235260   call 00234E60 ($-405) E8FBFBFFFF

sub_53E60

call 0028160D - 0x3d open existing file

1
3532c1
2b9ee0
351be
200
3551bc

1
3532c1
2b9ee0
3551a0

call sub_98817 -open file
MEM_StrCopy(SegPhys(ds)+reg_dx,name1,DOSNAMEBUF);
bool DOS_OpenFile("c:/netherw/cdata/version.dat",0x40,Bit16u * entry(0x3d40))
bool localDrive::FileOpen(DOS_File * * file(NULL),"netherw/cdata/version.dat","0x40")
DOS_FindDevice("c:/netherw/cdata/version.dat")
testdir(NETHERW\\CDATA)
#ifdef host_cnv_use_wchar
	FILE * hand=_wfopen(host_name,type);
#else
	FILE * hand=fopen(host_name,type);
#endif
call 1798DA -filelength - vraci 5

call 2798A7 -read from file
call 27994C -close


0160:234E60   push ebx 53
0160:234E61   push esi 56
0160:234E62   push edi 57
0160:234E63   push ebp 55
0160:234E64   mov  ebp,esp 89E5
0160:234E66   mov  edi,[ebp+0018] 8B7D18
0160:234E69   push 00000200 6800020000
0160:234E6E   mov  edx,[ebp+0014] 8B5514
0160:234E71   push edx 52
0160:234E72   call 00279817 ($+449a0) E8A0490400 
0160:234E77   mov  ebx,eax 89C3
0160:234E79   add  esp,0008 83C408
0160:234E7C   cmp  eax,FFFF 83F8FF
0160:234E7F   je   00234ECD ($+4c) 744C
0160:234E81   push eax 50
0160:234E82   call 002798DA ($+44a53) E8534A0400 //filelenght
0160:234E87   add  esp,0004 83C404
0160:234E8A   push eax 50
0160:234E8B   push edi 57
0160:234E8C   push ebx 53
0160:234E8D   mov  esi,eax 89C6
0160:234E8F   call 002798A7 ($+44a13) E8134A0400 //read
0160:234E94   add  esp,000C 83C40C
0160:234E97   push ebx 53
0160:234E98   call 00279882 ($+449e5) E8E5490400
0160:234E9D   add  esp,0004 83C404
0160:234EA0   push edi 57
0160:234EA1   push edi 57
0160:234EA2   call 0027994C ($+44aa5) E8A54A0400
0160:234EA7   add  esp,0008 83C408
0160:234EAA   test eax,eax 85C0
0160:234EAC   jge  00234EC9 ($+1b) 7D1B
0160:234EAE   mov  ebx,[ebp+0014] 8B5D14
0160:234EB1   push ebx 53
0160:234EB2   push 002A15DC 68DC152A00
0160:234EB7   call 0026D2AA ($+383ee) E8EE830300
0160:234EBC   mov  eax,FFFFFFFE B8FEFFFFFF
0160:234EC1   add  esp,0008 83C408
0160:234EC4   pop  ebp 5D
0160:234EC5   pop  edi 5F
0160:234EC6   pop  esi 5E
0160:234EC7   pop  ebx 5B
0160:234EC8   ret C3

0160:235265   mov  ecx,[ebp+007E] 8B4D7E
0160:235268   add  esp,0008 83C408
0160:23526B   cmp  ecx,003C 83F93C
0160:23526E   je   00235272 ($+2) 7402
0160:235270   mov  bh,bl 88DF
0160:235272   push 002A1650 6850162A00
0160:235277   call 0029EBED ($+69971) E871990600
0160:23527C   add  esp,0004 83C404
0160:23527F   push 002A1654 6854162A00
0160:235284   mov  eax,[002A51A4] A1A4512A00
0160:235289   push 002A163C 683C162A00
0160:23528E   mov  al,[eax+000000B6] 8A80B6000000
0160:235294   push 002A14E0 68E0142A00
0160:235299   and  eax,000000FF 25FF000000
0160:23529E   push eax 50
0160:23529F   push 002A1660 6860162A00
0160:2352A4   lea  eax,[ebp-0002] 8D45FE
0160:2352A7   push eax 50
0160:2352A8   call 0026F3D5 ($+3a128) E828A10300
0160:2352AD   add  esp,0018 83C418
0160:2352B0   push 002A1654 6854162A00
0160:2352B5   push 002A1670 6870162A00
0160:2352BA   lea  eax,[ebp+003E] 8D453E
0160:2352BD   push eax 50
0160:2352BE   call 0026F3D5 ($+3a112) E812A10300
0160:2352C3   add  esp,000C 83C40C
0160:2352C6   test bh,bh 84FF
0160:2352C8   jne  002352DF ($+15) 7515
0160:2352CA   lea  eax,[ebp+003E] 8D453E
0160:2352CD   push eax 50
0160:2352CE   lea  eax,[ebp-0002] 8D45FE
0160:2352D1   push eax 50
0160:2352D2   call 00234EF0 ($-3e7) E819FCFFFF
0160:2352D7   add  esp,0008 83C408
0160:2352DA   test ax,ax 6685C0
0160:2352DD   je   0023534B ($+6c) 746C
0160:2352DF   push 002A167C 687C162A00
0160:2352E4   call 0029EBED ($+69904) E804990600
0160:2352E9   add  esp,0004 83C404
0160:2352EC   call 0029E953 ($+69662) E862960600
0160:2352F1   push 002A163C 683C162A00
0160:2352F6   mov  [002C5720],eax A320572C00
0160:2352FB   mov  eax,[002A51A4] A1A4512A00
0160:235300   push 002A14E0 68E0142A00
0160:235305   mov  al,[eax+000000B6] 8A80B6000000
0160:23530B   and  eax,000000FF 25FF000000
0160:235310   push eax 50
0160:235311   push 002A169C 689C162A00
0160:235316   lea  eax,[ebp-0002] 8D45FE
0160:235319   push eax 50
0160:23531A   call 0026F3D5 ($+3a0b6) E8B6A00300
0160:23531F   add  esp,0014 83C414
0160:235322   push 002A1654 6854162A00
0160:235327   lea  eax,[ebp-0002] 8D45FE
0160:23532A   push eax 50
0160:23532B   push 002A16A8 68A8162A00
0160:235330   call 00234F80 ($-3b5) E84BFCFFFF
0160:235335   add  esp,000C 83C40C
0160:235338   test al,al 84C0
0160:23533A   je   0023533E ($+2) 7402
0160:23533C   xor  bl,bl 30DB
0160:23533E   push 002A1650 6850162A00
0160:235343   call 0029EBED ($+698a5) E8A5980600
0160:235348   add  esp,0004 83C404
0160:23534B   test bl,bl 84DB
0160:23534D   jz   0023541F ($+cc) 0F84CC000000
0160:235353   push 002A16B0 68B0162A00
0160:235358   mov  eax,[002A51A4] A1A4512A00
0160:23535D   push 002A163C 683C162A00
0160:235362   mov  al,[eax+000000B6] 8A80B6000000
0160:235368   push 002A14E0 68E0142A00
0160:23536D   and  eax,000000FF 25FF000000
0160:235372   push eax 50
0160:235373   push 002A1660 6860162A00
0160:235378   lea  eax,[ebp-0002] 8D45FE
0160:23537B   push eax 50
0160:23537C   call 0026F3D5 ($+3a054) E854A00300
0160:235381   add  esp,0018 83C418
0160:235384   push 002A16B0 68B0162A00
0160:235389   push 002A1670 6870162A00
0160:23538E   lea  eax,[ebp+003E] 8D453E
0160:235391   push eax 50
0160:235392   call 0026F3D5 ($+3a03e) E83EA00300
0160:235397   add  esp,000C 83C40C
0160:23539A   test bh,bh 84FF
0160:23539C   jne  002353B3 ($+15) 7515
0160:23539E   lea  eax,[ebp+003E] 8D453E
0160:2353A1   push eax 50
0160:2353A2   lea  eax,[ebp-0002] 8D45FE
0160:2353A5   push eax 50
0160:2353A6   call 00234EF0 ($-4bb) E845FBFFFF
0160:2353AB   add  esp,0008 83C408
0160:2353AE   test ax,ax 6685C0
0160:2353B1   je   0023541F ($+6c) 746C
0160:2353B3   push 002A16BC 68BC162A00
0160:2353B8   call 0029EBED ($+69830) E830980600
0160:2353BD   add  esp,0004 83C404
0160:2353C0   call 0029E953 ($+6958e) E88E950600
0160:2353C5   push 002A163C 683C162A00
0160:2353CA   mov  [002C5720],eax A320572C00
0160:2353CF   mov  eax,[002A51A4] A1A4512A00
0160:2353D4   push 002A14E0 68E0142A00
0160:2353D9   mov  al,[eax+000000B6] 8A80B6000000
0160:2353DF   and  eax,000000FF 25FF000000
0160:2353E4   push eax 50
0160:2353E5   push 002A169C 689C162A00
0160:2353EA   lea  eax,[ebp-0002] 8D45FE
0160:2353ED   push eax 50
0160:2353EE   call 0026F3D5 ($+39fe2) E8E29F0300
0160:2353F3   add  esp,0014 83C414
0160:2353F6   push 002A16B0 68B0162A00
0160:2353FB   lea  eax,[ebp-0002] 8D45FE
0160:2353FE   push eax 50
0160:2353FF   push 002A16A8 68A8162A00
0160:235404   call 00234F80 ($-489) E877FBFFFF
0160:235409   add  esp,000C 83C40C
0160:23540C   test al,al 84C0
0160:23540E   je   00235412 ($+2) 7402
0160:235410   xor  bl,bl 30DB
0160:235412   push 002A1650 6850162A00
0160:235417   call 0029EBED ($+697d1) E8D1970600
0160:23541C   add  esp,0004 83C404
0160:23541F   test bl,bl 84DB
0160:235421   jz   002354F3 ($+cc) 0F84CC000000
0160:235427   push 002A16DC 68DC162A00
0160:23542C   mov  eax,[002A51A4] A1A4512A00
0160:235431   push 002A163C 683C162A00
0160:235436   mov  al,[eax+000000B6] 8A80B6000000
0160:23543C   push 002A14E0 68E0142A00
0160:235441   and  eax,000000FF 25FF000000
0160:235446   push eax 50
0160:235447   push 002A1660 6860162A00
0160:23544C   lea  eax,[ebp-0002] 8D45FE
0160:23544F   push eax 50
0160:235450   call 0026F3D5 ($+39f80) E8809F0300
0160:235455   add  esp,0018 83C418
0160:235458   push 002A16DC 68DC162A00
0160:23545D   push 002A1670 6870162A00
0160:235462   lea  eax,[ebp+003E] 8D453E
0160:235465   push eax 50
0160:235466   call 0026F3D5 ($+39f6a) E86A9F0300
0160:23546B   add  esp,000C 83C40C
0160:23546E   test bh,bh 84FF
0160:235470   jne  00235487 ($+15) 7515
0160:235472   lea  eax,[ebp+003E] 8D453E
0160:235475   push eax 50
0160:235476   lea  eax,[ebp-0002] 8D45FE
0160:235479   push eax 50
0160:23547A   call 00234EF0 ($-58f) E871FAFFFF
0160:23547F   add  esp,0008 83C408
0160:235482   test ax,ax 6685C0
0160:235485   je   002354F3 ($+6c) 746C
0160:235487   push 002A16E8 68E8162A00
0160:23548C   call 0029EBED ($+6975c) E85C970600
0160:235491   add  esp,0004 83C404
0160:235494   call 0029E953 ($+694ba) E8BA940600
0160:235499   push 002A163C 683C162A00
0160:23549E   mov  [002C5720],eax A320572C00
0160:2354A3   mov  eax,[002A51A4] A1A4512A00
0160:2354A8   push 002A14E0 68E0142A00
0160:2354AD   mov  al,[eax+000000B6] 8A80B6000000
0160:2354B3   and  eax,000000FF 25FF000000
0160:2354B8   push eax 50
0160:2354B9   push 002A169C 689C162A00
0160:2354BE   lea  eax,[ebp-0002] 8D45FE
0160:2354C1   push eax 50
0160:2354C2   call 0026F3D5 ($+39f0e) E80E9F0300
0160:2354C7   add  esp,0014 83C414
0160:2354CA   push 002A16DC 68DC162A00
0160:2354CF   lea  eax,[ebp-0002] 8D45FE
0160:2354D2   push eax 50
0160:2354D3   push 002A16A8 68A8162A00
0160:2354D8   call 00234F80 ($-55d) E8A3FAFFFF
0160:2354DD   add  esp,000C 83C40C
0160:2354E0   test al,al 84C0
0160:2354E2   je   002354E6 ($+2) 7402
0160:2354E4   xor  bl,bl 30DB
0160:2354E6   push 002A1650 6850162A00
0160:2354EB   call 0029EBED ($+696fd) E8FD960600
0160:2354F0   add  esp,0004 83C404
0160:2354F3   test bl,bl 84DB
0160:2354F5   jz   0023559D ($+a2) 0F84A2000000
0160:2354FB   mov  eax,[002A51A4] A1A4512A00
0160:235500   test byte [eax+0016],08 F6401608
0160:235504   jnz  0023559D ($+93) 0F8593000000
0160:23550A   push 002A14D8 68D8142A00
0160:23550F   mov  al,[eax+000000B6] 8A80B6000000
0160:235515   push 002A14E0 68E0142A00
0160:23551A   and  eax,000000FF 25FF000000
0160:23551F   push eax 50
0160:235520   push 002A14EC 68EC142A00
0160:235525   lea  eax,[ebp-0002] 8D45FE
0160:235528   push eax 50
0160:235529   call 0026F3D5 ($+39ea7) E8A79E0300
0160:23552E   add  esp,0014 83C414
0160:235531   push 002A1708 6808172A00
0160:235536   call 0029EBED ($+696b2) E8B2960600
0160:23553B   add  esp,0004 83C404
0160:23553E   call 0029E953 ($+69410) E810940600
0160:235543   push 002A14D8 68D8142A00
0160:235548   mov  [002C5720],eax A320572C00
0160:23554D   mov  eax,[002A51A4] A1A4512A00
0160:235552   push 002A14E0 68E0142A00
0160:235557   mov  al,[eax+000000B6] 8A80B6000000
0160:23555D   and  eax,000000FF 25FF000000
0160:235562   push eax 50
0160:235563   push 002A169C 689C162A00
0160:235568   lea  eax,[ebp-0002] 8D45FE
0160:23556B   push eax 50
0160:23556C   call 0026F3D5 ($+39e64) E8649E0300
0160:235571   add  esp,0014 83C414
0160:235574   push 002A1720 6820172A00
0160:235579   lea  eax,[ebp-0002] 8D45FE
0160:23557C   push eax 50
0160:23557D   push 002A1720 6820172A00
0160:235582   call 00234F80 ($-607) E8F9F9FFFF
0160:235587   add  esp,000C 83C40C
0160:23558A   test al,al 84C0
0160:23558C   je   00235590 ($+2) 7402
0160:23558E   xor  bl,bl 30DB
0160:235590   push 002A1650 6850162A00
0160:235595   call 0029EBED ($+69653) E853960600
0160:23559A   add  esp,0004 83C404
0160:23559D   test bl,bl 84DB
0160:23559F   je   002355F0 ($+4f) 744F
0160:2355A1   test bh,bh 84FF
0160:2355A3   je   002355F0 ($+4b) 744B
0160:2355A5   push 002A1630 6830162A00
0160:2355AA   mov  eax,[002A51A4] A1A4512A00
0160:2355AF   push 002A163C 683C162A00
0160:2355B4   mov  al,[eax+000000B6] 8A80B6000000
0160:2355BA   push 002A14E0 68E0142A00
0160:2355BF   and  eax,000000FF 25FF000000
0160:2355C4   push eax 50
0160:2355C5   push 002A1644 6844162A00
0160:2355CA   lea  eax,[ebp-0002] 8D45FE
0160:2355CD   push eax 50
0160:2355CE   call 0026F3D5 ($+39e02) E8029E0300
0160:2355D3   add  esp,0018 83C418
0160:2355D6   push 0004 6A04
0160:2355D8   lea  eax,[ebp+007E] 8D457E
0160:2355DB   push eax 50
0160:2355DC   lea  eax,[ebp-0002] 8D45FE
0160:2355DF   mov  esi,0000003C BE3C000000
0160:2355E4   push eax 50
0160:2355E5   mov  [ebp+007E],esi 89757E
0160:2355E8   call 00279C48 ($+4465b) E85B460400
0160:2355ED   add  esp,000C 83C40C
0160:2355F0   mov  al,bl 88D8
0160:2355F2   lea  esp,[ebp+00000082] 8DA582000000
0160:2355F8   pop  ebp 5D
0160:2355F9   pop  esi 5E
0160:2355FA   pop  ebx 5B
0160:2355FB   ret C3
0160:2355FC   lea  eax,[eax] 8D442000
0160:235600   push ebp 55
0160:235601   mov  ebp,esp 89E5
0160:235603   sub  esp,0038 83EC38
0160:235606   lea  eax,[ebp-0038] 8D45C8
0160:235609   push eax 50
0160:23560A   lea  eax,[ebp-001C] 8D45E4
0160:23560D   push eax 50
0160:23560E   xor  edx,edx 31D2
0160:235610   push 0033 6A33
0160:235612   mov  [ebp-001C],dx 668955E4
0160:235616   call 00279D52 ($+44737) E837470400
0160:23561B   xor  edx,edx 31D2
0160:23561D   add  esp,000C 83C40C
0160:235620   mov  [002B4768],edx 891568472B00
0160:235626   mov  esp,ebp 89EC
0160:235628   pop  ebp 5D
0160:235629   ret C3
